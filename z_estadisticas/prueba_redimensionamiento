import cv2
import json
import numpy as np
import matplotlib.pyplot as plt

# --- CONFIGURACIÓN MANUAL ---
imagen_input = "/home/gmanty/code/output_20s/images_yolov8/frame_0000.jpg"
etiquetas_input = "/home/gmanty/code/output_20s/tracking/tracking_pez/labels/frame_0000.txt"
json_input = "/home/gmanty/code/output_20s/preprocesado_info.json"
output_path = "/home/gmanty/code/output_20s/salida.png"

# --- TRANSFORMAR COORDENADAS ---

def reconstruir_imagen_con_bboxes(imagen_input, etiquetas_input, json_input, output_path):
    # Cargar imagen 1024x1024
    img = cv2.imread(imagen_input)
    if img is None:
        raise FileNotFoundError(f"No se pudo cargar la imagen: {imagen_input}")
    img_rgb = cv2.cvtColor(img, cv2.COLOR_BGR2RGB) #Para cambiar el formato de los colores de BGR a RGB

    # Cargar información de preprocesado
    with open(json_input, "r", encoding="utf-8") as f:
        info = json.load(f)

    crop_w, crop_h = info["redimensiopn_original"]
    

    # Recalcular escala



# --- EJECUTAR ---
if __name__ == "__main__":
    reconstruir_imagen_con_bboxes(imagen_input, etiquetas_input, json_input, output_path)